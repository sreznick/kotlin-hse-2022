/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package homework03


import kotlinx.coroutines.*


const val subjectsFile = "_subjects.csv"
const val commentsFile = "_comments.csv"

fun main(args: Array<String>) = runBlocking {
    try {
        val client = RedditClient()
        supervisorScope {
            args.forEach {
                launch { writeCsv(it, client) }
            }
        }
    } catch (e: Exception) {
        println("Failed to perform the requested task, $e")
        return@runBlocking
    }
    println("Done!")
}
